---
- name: Set retry interval
  hosts: localhost
  connection: local
  vars:
  - object: root

  gather_facts: False
  roles:
  - syncrou.manageiq-automate
  - syncrou.manageiq-vmdb

  tasks:
    - name: "Get miq_request object reference"
      manageiq_automate:
        workspace: "{{ workspace }}"
        get_attribute:

          object: "root"
          attribute: "miq_request"

      register: miq_request

    - name: Get a vmdb object
      manageiq_vmdb:
        href: "{{ miq_request }}"
      register: vmdb_object
